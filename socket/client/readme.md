# socket client说明

## **0.7 16 Mar. 2021 Beta**

**1. 增加命令执行 - CMD。**

- 通过redis命令集执行命令。
  - 单次执行。
- 通过cmd任务下发执行命令。
  - 循环执行。
- 添加异步任务，等待任务执行完成后返回数据。*数据提交在下个版本增加。*

**2. 任务报文。**

- 增加发送任务信息报文机制。
  - 具体详见 `ant socket 传输手册` 。

**3. 优化任务识别方式。**

- 通过下发的任务编号前缀识别如何执行任务。

**4. 其他。**

- *日志记录将在下个版本添加。*
- *可能会有线程池线程溢出问题。*

## **0.61 8 Mar. 2021 Beta**

**1. 优化线程。**

- 优化线程死锁问题。
- 优化任务提交线程问题。（不确定线程）

**2. 优化ADH56函数。**

- 添加MAC地址获取

**3. 报文信息升级。**

- 所有信息发送都会带信息编号。

## **0.6 3 Mar. 2021 Beta**

**1. 增加基础功能函数。**

- redis功能。
- 加载配置文件功能。

**2. 服务器连接与异常处理。**

- 当TCP连接成功时，获取当前TCP套接字所使用的本地协议IP给UDP地址绑定使用。（UDP和TCP端口固定）
- 服务器离线，客户端进入循环连接状态。
- TCP心跳发包超时设定。
- 当发包出现非超时错误时，重启TCP服务器。
  - 增加错误判断函数。
    - 增加 `远程主机强迫关闭了一个现有的连接` 错误识别。

**3. 发包。**

- 通过传入 `reportMethod` 的 `bool` 值判断发送普通心跳包或是信息汇报。
  - 当发送普通心跳包时，程序循环发送，间隔10秒。当有异常出现时，进入异常处理模块。
  - 当发送信息汇报时，只发送一次后结束。

- 信息汇报模式根据其不稳定性，将通过开辟线程单独调用处理函数和TCP发送函数来发包。

**4. 功能函数。**

- 增加系统信息采集函数（`ADH56`），可采集信息：
  - IPV4
  - hostname

**5. 其他优化。**

- 优化CMD窗口信息输出。

**6. 线程。**

- 增加守护线程，持续守护发包与收包函数。
- 增加信息汇报调度线程。
